---
title: "Uppy 2.0.0: New major release"
date: 2021-06-30 # TODO
author: 
  - aduh95
  - murderlon
  - arturi
  - goto-bus-stop
  - mifi
image: null # TODO
published: false
---

# Uppy 2.0.0

## New modern bundle without polyfills

In Uppy 2.0.0, we've removed all built-in polyfills. If you need your app to
support older browser (such as IE 11), you should add the following polyfills to your bundle:

- [abortcontroller-polyfill](https://github.com/mo/abortcontroller-polyfill)
- [core-js](https://github.com/zloirock/core-js)
- [md-gum-polyfill](https://github.com/mozdevs/mediaDevices-getUserMedia-polyfill)
- [resize-observer-polyfill](https://github.com/que-etc/resize-observer-polyfill)
- [whatwg-fetch](https://github.com/github/fetch)

If you're using a bundler, you need import them before Uppy:

```js
import 'core-js'
import 'whatwg-fetch'
import 'abortcontroller-polyfill/dist/polyfill-patch-fetch'
// Order matters: AbortController needs fetch which needs Promise (provided by core-js).

import 'md-gum-polyfill'
import ResizeObserver from 'resize-observer-polyfill'

window.ResizeObserver ??= ResizeObserver

export { default } from '@uppy/core'
export * from '@uppy/core'
```

If you're using Uppy from CDN, we now provide two bundles, one for up-to-date
browsers that do not include polyfills and use modern syntax, and one for legacy
browsers. When migrating, be mindful about which browsers you want to support:

```html
<!-- Modern browsers (recommended) -->
<script src="https://releases.transloadit.com/uppy/v2.0.0/uppy.min.js"></script>

<!-- Legacy browsers (IE11+) -->
<script nomodule src="https://releases.transloadit.com/uppy/v2.0.0/uppy.legacy.min.js"></script>
<script type="module">import"https://releases.transloadit.com/uppy/v2.0.0/uppy.min.js";</script>
```
## `Plugin` is replaced with `BasePlugin` and `UIPlugin`

`@uppy/core` provided a `Plugin` class for creating plugins. This was used for any official plugin, but also
for users who want to create their own plugin. But `Plugin` always came bundled with Preact, even if the plugin itself
didn't add any UI elements. 

As of Uppy 2.0.0, `Plugin` has been replaced with `BasePlugin` and `UIPlugin`. `BasePlugin` is the minimum you need to create a plugin
and `UIPlugin` adds Preact for rendering user interfaces.

## Strict TypeScript types by default

Uppy used to have loose types by default and strict types as opt-in.
The default export was a function that returned the `Uppy` class,
and the types came bundled with the default export (`Uppy.SomeType`). 

```ts
import Uppy from '@uppy/core'
import Tus from '@uppy/tus'

const uppy = Uppy<Uppy.StrictTypes>()

uppy.use(Tus, {
  invalidOption: null, // this will make the compilation fail!
})
```

Uppy is now strictly typed by default and loose types have been removed.
The default export is the `Uppy` class and not a function.
This means you need to call `Uppy` with the `new` keyword when initializing it. 

/* eslint-disable @typescript-eslint/no-unused-vars */

```ts
// ...

const uppy = new Uppy()

uppy.use(Tus, {
  invalidOption: null, // this will make the compilation fail!
})
```

Uppy types are now individual export and should be imported separately.

```ts
import type { PluginOptions, UIPlugin, PluginTarget } from '@uppy/core'
```

### Event types

Uppy core provides an [`.on`](https://uppy.io/docs/uppy/#uppy-on-39-event-39-action) method to listen to [events](https://uppy.io/docs/uppy/#Events).
The types for these were loose and allowed for invalid events to be passed, such as `uppy.on('upload-errrOOOoooOOOOOrrrr')`.
Events have received a big update thanks to [Hawxy](https://github.com/Hawxy), making them more strict and accurate.

A breaking was required to make this happen.

```ts
// Before
type Meta = { myCustomMetadata: string }

// invalid event
uppy.on<Meta>('upload-errrOOOoooOOOOOrrrr', () => {
  // ...
})

// after

// Normal event signature
uppy.on('complete', (result) => {
  const successResults = result.successful
})

// Custom signature
type Meta = { myCustomMetadata: string }

uppy.on<'complete', Meta>('complete', (result) => {
  // The passed type is now merged into the `meta` types.
  const meta = result.successful[0].meta.myCustomMetadata
})
```

Using official Uppy plugins that add their own events are automatically added to the namespace.
For instance, when using `@uppy/dashboard`:

```ts
uppy.on('dashboard:file-edit-state', (file) => {
  const fileName = file.name
})
```

## Batch pre-signing URL's for AWS S3

...

## And more...

- The default export of `@uppy/core` is now the `Uppy` class, which means you always need to invoke it with the `new` keyword.
  This used to be a function which returns the `Uppy` class.

- The `.run` method on the `Uppy` instance has been removed.
  This method was already obsolute and only logged a warning.
  As of this major version it no longer exists.

- Upgraded almost all of Uppy's dependencies. This includes the migration to Preact X.
  All plugins that depend on Preact have been upgraded from `8.2.9` to the latest version `10.5.13`.

- `@uppy/informer` now supports showing multiple notifications at the same time. The notifications themselves have also been improved.

- Improved screenreader accessibility for checkboxes and the remove file button for `@uppy/dashboard`.

- Sort files and folders alphabetically in the Google Drive provider.

- Polished our code base with improved eslint rules, private field methods, and other modern JavaScript features
  that help us write more intention revealing and safe code.

- To make Uppy more inclusive for contributions, and to avoid an oppresive metaphor, we have renamed our `master` branch to `main`.
